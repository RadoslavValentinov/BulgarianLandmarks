@model LandMarkViewModelAll

@{
    var first = true;
}

<head>
    <link rel="stylesheet" href="~/css/All CSS file/LandMarkCustomCSS/LandMarkByIDCustom.css" asp-append-version="true" />
</head>

<article id="landmark-@Model.Id" class="cont">
    <header class="landmark-header text-lg-center">
        <h1 style="font-size:50px;">@Model.Name</h1>
    </header>

    @{
        var pic = Model.Pictures.Where(x => x.LandMarkId == Model.Id).ToList();
    }

    <section class="carousel-section" aria-label="Изображения на забележителността">
        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                @foreach (var sa in pic)
                {
                    <div class="carousel-item @(first ? "active" : string.Empty)">
                        <figure>
                            <img style="height:500px; object-fit:cover;" src="@sa.UrlImgAddres" alt="@($"{Model.Name} - изображение")" />
                            <figcaption class="visually-hidden">Снимка на @Model.Name</figcaption>
                        </figure>
                    </div>
                    { first = false; }
                }
            </div>
        </div>
    </section>

    <section id="description" class="descript" aria-labelledby="desc-heading">
        <h2 id="desc-heading" class="visually-hidden">Описание</h2>
        <p class="text-black">@Model.Description</p>
        <p>
            <a id="more" href="https://www.google.com/search?q=@Uri.EscapeDataString(Model.Name!)" target="_blank" rel="noopener">Може да прочетете още...</a>
        </p>
    </section>

    <aside class="secOptions" aria-labelledby="rating-heading">
        <h3 id="rating-heading" class="visually-hidden">Рейтинг и информация</h3>

        <style>
            .checked { color: orange; }
        </style>

        @{
            var stars = Model.Rating > 0 ? (int)System.Math.Ceiling((double)(Model.Rating / 2)) : 0;
        }

        <div class="rating-block">
            <p class="rating" aria-label="Рейтинг">
                Рейтинг:
                @for (int i = 1; i <= 5; i++)
                {
                    <span class="fa fa-star @(i <= stars ? "checked" : string.Empty)" aria-hidden="true"></span>
                }
                <span class="rating-value">:@Model.Rating</span>
            </p>

            @if (User.Identity?.IsAuthenticated == true)
            {
                <p id="voteBtn">
                    <a id="vote" class="btn"  asp-controller="LandMark" asp-action="UpRatting" asp-route-id="@Model.Id">Гласувай</a>
                </p>
            }
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.TownName))
        {
            <hr />
            <div class="town-info" aria-label="Град">
                <h3>Град: <span>@Model.TownName</span></h3>
            </div>
            <hr />
        }
    </aside>

    <section class="map-section" aria-label="Карта">
        <div id="map-@Model.Id" style="height:400px; width:100%;" role="application" aria-roledescription="map"></div>

        <script>
            function initMap() {
                var location = { lat: @Model.Latitude, lng: @Model.Longitude };
                var map = new google.maps.Map(document.getElementById('map-@Model.Id'), {
                    zoom: 15,
                    center: location
                });
                var marker = new google.maps.Marker({
                    position: location,
                    map: map
                });
            }
        </script>

        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=MY_API_KEY&callback=initMap">
        </script>
    </section>
</article>